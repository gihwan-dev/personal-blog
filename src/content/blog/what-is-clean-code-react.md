---
author: Gihwan-dev
pubDatetime: 2024-05-30T00:27:39.599Z
title: 리액트 클린코드에 대해서 고민해 보았다
slug: what-is-clean-code-react
featured: true
draft: false
tags:
  - development
  - architecture
  - cleancode
description: 최근 아키텍쳐를 구상하고 보기좋은 코드를 작성하는것에 대한 고민을 하면서 느낀점들을 정리해 봤습니다
---

클린코드를 작성하려면 어떤 것들을 생각해야할까? 라는 물음에서 시작해서 내가 생각하는 좋은 구성을 생각하고 정리해 봤습니다.

## Table of contents

### 변수 네이밍

- 명사
- is 또는 has로 시작

### 함수 네이밍

- 일반 함수: 동사로 시작
- 이벤트 핸들러: handle

### props에 대한 생각

props를 어떻게 다뤄야할까?

- props는 인자다.
- local state는 함수 내부에 선언된 **지역 변수**다.
- 전역 상태, 리액트 쿼리는 함수 내부에 선언된 **전역 변수**다.

### 상태 관리에 대한 생각

상태는 데이터다. 다만 변경시 사이드이펙트를 일으키는 전역 변수다. 상태는 다음의 값으로부터 얻어질 수 있다. `React Query`, `Zustand`, `Context API`, `useState` 이에 대해 정리해보자.

- 리액트 쿼리와 zustand는 훅이 아닌 데이터로 생각한다.
- 언제 Context API를 사용하고 전역 상태는 언제 사용할까?
  - Context API: 값이 자주 변경되지 않는 전역의 어떤 상태를 사용해야 할 경우. (theme provider 등)
  - 전역 상태 관리 라이브러리: 값이 자주 변경되는 어떤 상태를 사용해야 할 경우.
- dispatch 함수는 어느정도 역할까지 가능해야 할까?
  - 상태를 변경하는 로직만 수행한다. zustand의 store는 오로지 값으로만 사용하며 dispatch는 상태의 수정만 담당한다.
- zustand 스토어는 어느정도 단위여야 하나?
  - 하나의 스토어만 가지게 하라고 한다. 그런데 전역 상태가 많아지면 너무 한 스토어가 비대해지지 않나? => 도메인 단위로 스토어를 가진다.

### 컴포넌트에 대한 생각

- depth가 깊어지는 것에 대한 고민을 해야한다.
- children을 인자로 받는 컴포넌트는 함수를 인자로 받는 **고차 함수** 아닌가? 고차 함수를 사용하면 함수의 depth가 깊어지는 것을 해결할 수 있다.
- props는 있는게 좋다. 깊지만 않다면. 입력과 출력을 명확히 할 수 있어 추적에 용이하다.
- 컴포넌트도 계층 구조를 분리하고 추상화를 해야한다.

### 비즈니스 로직 처리하기

- 커스텀 훅
  - 비즈니스 로직을 수행하자. 커스텀훅은 오로지 컴포넌트에서만 호출될 수 있다. 비즈니스 로직 컨트롤러라 생각하자. 다양한 비즈니스 로직을 조합해 반환한다.
- 일반 함수
  - 비즈니스 로직과 관련된 일반 함수다. 유틸리티 함수의 조합이다.
- 유틸리티 함수
  - 가장 작은 단위의 일을 하는 함수다. 도메인과 관련된 유틸리티함수, 관련되지 않은 유틸리티 함수로 분리된다. 관련되지 않을 경우 공용 함수다. 이럴 경우 데이터를 단위로 분리한다. 관련되었을 경우 도메인과 관련된 데이터를 단위로 분리할 수 있다.

### 컴포넌트 계층 구조를 설계해 책임 분리하기

- 페이지 컴포넌트: 각 컴포넌트를 조합해 페이지를 구성한다. 모듈로 동작하며 어떤 로직도 포함하지 않는다.
- 컴포넌트
  - View 컴포넌트: UI를 그리는 작업만 한다. 순수 함수다. props를 통해 인자를 받아 UI를 반환한다.
  - 컨트롤러 컴포넌트: View 컴포넌트를 제어한다. 커스텀 훅에서 필요한 값을 추출해 View 컴포넌트로 전달한다.
  - 프로바이더 컴포넌트: ContextAPI를 전달하는 컴포넌트. 모듈 컴포넌트에서 정의된다.
  - 모듈 컴포넌트: 컴포넌트를 취합해 묶어 export 한다. index.tsx 파일로 작성한다.
    - 어느정도의 단위로 컴포넌트를 모듈화 해야할까? 그 모듈이 가지는 의미에 있다고 생각한다. 모듈이 적당한 수준의 추상화를 가지고 그 의미를 파악할 수 있다면 하나의 모듈 컴포넌트로 사용될 수 있다. (ex - LoginForm, Profile 등)

### 공용 컴포넌트 설계하기

작은 일을 할수록, 도메인에 묶이지 않을수록 재사용성이 높다. 굳이 도메인이 묶일 필요가 없는 컴포넌트 라면 공용 컴포넌트가 될 수 있다.

공용 컴포넌트는 어느정도로 작은일을 해야할까?

- 적절한 수준의 추상화가 필요하다. 작을수록 좋다면 input 태그를 그냥 쓰는게 좋지 않나?
- 무분별한 prop의 확장은 공통 컴포넌트의 가치를 떨어트린다. 만능 컴포넌트를 지양하자. 공통 컴포넌트의 목적은 개발시간 단축과 유지보수 간편화에 있다. prop이 너무 많으면 이를 다루는 로직도 많아지고 더 복잡한 컴포넌트가 된다. 사용하기도 어렵다. 매개변수가 수십개가 있는 함수를 생각해보자. 어떻게 사용하겠는가.
